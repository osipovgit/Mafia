<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Play me</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script type="text/javascript">
        function deleteRoom() {
            $.get(location.href + '/delete').then(function (data) {
                document.location = data
            });
        }

        function leaveRoom() {
            $.get(location.href + '/leave').then(function (data) {
                document.location = data
            });
        }

        function exitRoom() {
            $.get(location.href + '/exit').then(function (data) {
                document.location = data
            });
        }

        function game() {
            $.get(location.href + '/game').then(function (data) {
                $("#info").html(data);
            });
        }

        function letsPlay() {
            setInterval(game, 500);
        }

        function startCheck() {
            $.get(location.href + '/start').then(function (data) {
                if (data === 2)
                    letsPlay();
                else startAgain();
            });
        }

        function startAgain() {
            startCheck();
        }

        function viewUsers() {
            $.get(location.href + '/update_view_players').then(function (jsonGameRooms) {
                $("#usersList").html(jsonGameRooms);
                console.log(jsonGameRooms);
            });
        }

        function viewUsersPerSec() {
            setInterval(viewUsers, 500);
        }

        $(document).ready(function () {
            viewUsersPerSec();
            startCheck();
        })
    </script>
</head>
<body>
<h1>Зетс руум фор гаме</h1>
<button type="submit" onclick="leaveRoom()">Покинуть комнату</button>
<button type="submit" onclick="deleteRoom()">Удалить комнату</button>
<br>
<button type="submit" onclick="startCheck()">HEУдалить комнату</button>
<div id="usersList"></div>
<div id="info"></div>
</body>
</html>